---
title: "Reactã®useStateã®å†…éƒ¨æ§‹é€ ã‚’ç†è§£ã™ã‚‹"
emoji: "ğŸï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "usestate"]
published: false
---

é›°å›²æ°—ã§ä½¿ã£ã¦ã„ãŸuseStateã®ä»•çµ„ã¿ã‚’ç†è§£ã™ã‚‹ã¹ãã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

## å‡¦ç†ã®æµã‚Œãƒ¡ãƒ¢
seté–¢æ•°ãŒå‘¼ã°ã‚Œã‚‹
->ã€Œstateã®æ›´æ–°ã€ã¨ã€Œå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€ãŒã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã•ã‚Œã‚‹
->ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãªã©ã®ãƒ¡ã‚¤ãƒ³ã®å‡¦ç†ãŒçµ‚ã‚ã‚‹
->

- ã€Œãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€ã®ç¤ºã™å…·ä½“çš„ãªå‡¦ç†å†…å®¹ã¯ä»¥ä¸‹2ç‚¹
1. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‘¼ã³å‡ºã—
2. å‘¼ã³å‡ºã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨å‰å›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å·®åˆ†è¨ˆç®—

->ã§ã€å·®åˆ†ãŒãªã‹ã£ãŸå ´åˆã¯
å·®åˆ†ãŒã‚ã£ãŸå ´åˆã¯


## ç–‘å•ãƒ¡ãƒ¢
- react fiberã¨ã¯ï¼Ÿ
https://zenn.dev/porokyu32/articles/960d9d6e45533b
- ã‚­ãƒ¥ãƒ¼ã®ã‚ˆã†ãªå‹•ä½œã‚’ã™ã‚‹(å³å¯†ã«ã¯ã‚­ãƒ¥ãƒ¼ã§ã¯ãªã„ã®ã‹ï¼Ÿ)ã€JSã®æ¦‚å¿µã¨ã—ã¦ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ã¨ãƒã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ãŒã‚ã‚‹
https://zenn.dev/ktmouk/articles/68fefedb5fcbdc
ã“ã‚Œã‚‰ã‚’ç†è§£ã—ãªã„ã¨ã“ã®å…¬å¼ãƒšãƒ¼ã‚¸ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œã®setTimeoutçµ‚äº†å‰ã«ç”»é¢æ›´æ–°ãŒè¡Œã‚ã‚Œã‚‹ç†ç”±ãŒç†è§£ã§ããªã„ã ã‚ã†
https://ja.react.dev/learn/queueing-a-series-of-state-updates#challenges
- å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å¾Œã®ä»®æƒ³DOMä½œæˆã¯ã€å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã„ã†æ¦‚å¿µã«å«ã¾ã‚Œã‚‹ï¼Ÿ

## å­¦ã³
- set->æ™®é€šã®å‡¦ç†(ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚„console.logãªã©)->stateå¤‰æ›´->å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°->ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå‘¼ã³å‡ºã—->å·®åˆ†è¨ˆç®—->ä»®æƒ³DOMã‚’å®ŸDOMã«ã‚³ãƒŸãƒƒãƒˆ->ãƒšã‚¤ãƒ³ãƒˆ(ã“ã“ã§UIãŒã¡ã‚ƒã‚“ã¨å¤‰ã‚ã£ã¦ã‚‹)
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ç›´å‰ã®stateæ›´æ–°ã®ãƒãƒƒãƒå‡¦ç†ã«ã¤ã„ã¦
https://ja.react.dev/learn/queueing-a-series-of-state-updates
- ã‚ãƒ¼ã‚ã‹ã£ãŸã‹ã‚‚ã€‚seté–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚ŒãŸæ™‚ã¯seté–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã ã‘ã§ã‚ã£ã¦ã€seté–¢æ•°ã®å¼•æ•°ã‚’å‘¼ã³å‡ºã™(=æ›´æ–°)ã¨ã„ã†ã®ãŒå³æ™‚å®Ÿè¡Œã•ã‚Œãšã«äºˆç´„ã•ã‚Œã‚‹ã‚“ã ã€‚ã§ã€ãƒãƒƒãƒå‡¦ç†ã®éš›ã«ã¯ã€seté–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã®ã§ã¯ãªãã€seté–¢æ•°ã®å¼•æ•°(=å‡¦ç†ã‚„ãƒ‡ãƒ¼ã‚¿)ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã®ã‹ï¼
> ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©å†…ã®ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¾ã§ã€React ã¯ state ã®æ›´æ–°å‡¦ç†ã‚’å¾…æ©Ÿã—ã¾ã™
https://ja.react.dev/learn/queueing-a-series-of-state-updates

- seté–¢æ•°ã®å¼•æ•°ã®(n => n + 1)ã¨ã‹è‡ªä½“ã‚’æ›´æ–°ç”¨é–¢æ•°ã¨è¨€ã†ã‚‰ã—ã„

## å‰æ

- æ›´æ–°ã¨å¤‰æ›´ã¯åŒã˜æ„å‘³ã¨ã™ã‚‹ï¼Ÿ

## Q1. ãªãœuseStateã§ã¯ã€Œstateæ›´æ–°ã€ã€Œå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€ã‚’å³å®Ÿè¡Œã›ãšã«ã‚ã–ã‚ã–äºˆç´„ã™ã‚‹ã®ï¼Ÿ

å…¬å¼ã§ã¯5ç‚¹ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚
https://ja.react.dev/learn/updating-objects-in-state

**A1. åŠ¹ç‡åŒ–ãƒ»æœ€é©åŒ–ã®ãŸã‚ã€‚**

è¤‡æ•°ã®seté–¢æ•°ã”ã¨ã«æ¯å›å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’è¡Œã†ã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å›æ•°ãŒå¤šããªã£ã¦ã—ã¾ã†ã®ã¯å½“ç„¶äºˆæƒ³ã§ãã‚‹ã€‚ã¤ã¾ã‚Šç„¡é§„ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒå¢—ãˆã‚‹ã€‚

ãªã®ã§ãã‚Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã«ã€å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¯¾è±¡(=stateã®å¤‰æ›´)ã‚’ãƒãƒƒãƒå‡¦ç†åŒ–ã™ã‚‹ã“ã¨ã§å¯¾å‡¦ã—ã¦ã„ã‚‹ã€‚
â†’å¾Œã§ã¾ã¨ã‚ã¦**1å›ã®**å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§æ¸ˆã¾ã™ã“ã¨ãŒã§ãã‚‹ã€‚

ã“ã®ã€Œå¾Œã§ã¾ã¨ã‚ã¦ã€ã‚„ã‚‹ã‚ˆã€ã¨ã„ã†ã®ãŒäºˆç´„ã§ã‚ã‚‹ã€‚

**A1-b. é€”ä¸­ã§stateãŒå¤‰ã‚ã£ãŸã‚‰ã‚„ã‚„ã“ã—ããªã‚‹ã‹ã‚‰**
ä½•åº¦ã‚‚å¤‰ãˆã¦ã„ãŸå ´åˆã€stateãŒã©ã“ã§ã©ã†å¤‰ã‚ã£ã¦ã„ã‚‹ã®ã‹ã¨ã„ã†å‡¦ç†ã®æµã‚ŒãŒã‚ã‹ã‚‰ãªããªã‚‹ã€‚
ãã†ã§ã¯ãªãã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸç¬é–“ã®stateã‚’ã‚³ãƒ¼ãƒ‰å†…ã®ã™ã¹ã¦ã®å ´æ‰€ã§å…±æœ‰ã™ã‚‹ã€‚ãã‚Œã«ã‚ˆã£ã¦stateã‚’å‚ç…§ã—ã¦ã„ã‚‹å ´æ‰€ã§ã®stateã®å€¤ã¯çµ¶å¯¾ã«åŒã˜ã«ãªã‚‹ã®ã§ã€å‡ºåŠ›çµæœãŒäºˆæƒ³ã—ã‚„ã™ããªã‚‹ã€‚ã¤ã¾ã‚Šæ„å›³ã—ãªã„å¤‰ãªç”»é¢ã«ã¯ãªã‚Šã«ãããªã‚‹ã€ã¨ã„ã†ã“ã¨ã€‚

## Q2. äºˆç´„ã£ã¦ä½•ï¼Ÿ

**A2. Reactå†…éƒ¨ã®ã‚­ãƒ¥ãƒ¼ã«çªã£è¾¼ã‚€ã“ã¨ã€å³ã¡ã€Œã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã€**

ã‚­ãƒ¥ãƒ¼ã¨ã„ã†è¨€è‘‰ã‹ã‚‰åˆ†ã‹ã‚‹ã‚ˆã†ã«ã€å®Ÿè¡Œã•ã‚Œã‚‹äºˆå®šã®å‡¦ç†ãŸã¡ãŒã€Œåˆ—ã‚’ä½œã£ã¦å¾…ã£ã¦ã„ã‚‹ã€ã¨ã„ã†ã®ãŒã€Œäºˆç´„ã€ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚

äºˆç´„ãŒå…¥ã‚‹ãŸã³ã«ã€ãã®äºˆç´„ã‚’ã¨ã‚Šã‚ãˆãšã©ã‚“ã©ã‚“ã‚­ãƒ¥ãƒ¼ã«çªã£è¾¼ã‚“ã§ã„ãã€‚ã¤ã¾ã‚Šå³æ™‚å®Ÿè¡Œã¯ã—ãªã„ã€‚ãã‚ŒãŒuseStateã®å“²å­¦ã€‚

## Q3. ã€Œstateæ›´æ–°ã€ã€Œstateå¤‰æ›´ã€ã€Œå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€ãŒäºˆç´„ã•ã‚Œã‚‹ã®ã¯ã„ã¤ï¼Ÿ

## Q4. äºˆç´„ã•ã‚ŒãŸã€Œstateæ›´æ–°ã€ã€Œstateå¤‰æ›´ã€ã€Œå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€ãŒå®Ÿéš›ã«å®Ÿè¡Œã•ã‚Œã‚‹ã®ã¯ã„ã¤ï¼Ÿ

Q.3ã¨Q.4ã«ã¾ã¨ã‚ã¦ç­”ãˆã‚‹ã€‚

ã¾ãšã€Reactã‚¢ãƒ—ãƒªã§ã®ç”»é¢æ›´æ–°ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã€ã™ãªã‚ã¡seté–¢æ•°ãŒå‘¼ã°ã‚Œã¦ã‹ã‚‰ãƒ–ãƒ©ã‚¦ã‚¶ã®ç”»é¢ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¾ã§ã®æµã‚Œã¯ä»¥ä¸‹ã®é€šã‚Šã§ã‚ã‚‹ã€‚
ï¼ˆåˆå›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®èª¬æ˜ã¯å‰²æ„›ã—ã€ã‚ãã¾ã§å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€å³ã¡2å›ç›®ä»¥é™ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã«ç„¦ç‚¹ã‚’ã‚ã¦ã¦èª¬æ˜ã™ã‚‹ï¼‰

1. seté–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
    - Reactã¯æ–°ã—ã„stateã‚’å†…éƒ¨çš„ã«ã‚­ãƒ¥ãƒ¼ã«å…¥ã‚Œã‚‹ï¼ˆã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ï¼‰ã€‚ã€Œstateæ›´æ–°ã€ã€Œå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€ã®ä¸¡æ–¹ã‚’äºˆç´„ã™ã‚‹ã€‚

2. Reactã¯ã€ç¾åœ¨ã®å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆä¾‹ï¼šã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ï¼‰ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¤ã€‚

3. ãã®å¾Œã€ã‚­ãƒ¥ãƒ¼ã«å…¥ã‚Œã‚‰ã‚ŒãŸå…¨ã¦ã®stateæ›´æ–°ã‚’å‡¦ç†ã™ã‚‹ã€‚ã“ã®æ™‚ç‚¹ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®stateãŒå®Ÿéš›ã«æ›´æ–°ã•ã‚Œã‚‹ã€‚

4. ã™ã¹ã¦ã®stateãŒæ›´æ–°ã•ã‚ŒãŸå¾Œã€æ›´æ–°ã•ã‚ŒãŸstateãŒå¤‰æ›´ã‚‚ã•ã‚Œã¦ã„ãŸã‚‰äºˆç´„ã•ã‚Œã¦ã„ãŸå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã™ã‚‹ã€‚æ›´æ–°ã•ã‚ŒãŸã ã‘ã§å¤‰æ›´ã¯ã•ã‚Œã¦ã„ãªã„ãªã‚‰äºˆç´„ã•ã‚Œã¦ã„ãŸå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹ã€‚

5. å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å®Ÿè¡Œå¾Œã€å¤‰æ›´å¾Œã®stateã‚’åæ˜ ã—ãŸä»®æƒ³DOMãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚ï¼ˆå¤‰æ›´ã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚‰ä»®æƒ³DOMã™ã‚‰ç”Ÿæˆã•ã‚Œãšã«çµ‚äº†ï¼Ÿãã®å ´åˆã¯æ¬¡ã®ãƒ—ãƒ­ã‚»ã‚¹ã«ç–‘å•ãŒæ®‹ã‚‹ï¼‰

6. ä»®æƒ³DOMã¨å®Ÿéš›ã®DOMã‚’æ¯”è¼ƒã—ï¼ˆå·®åˆ†æ¤œå‡ºï¼‰ã€å¿…è¦ãªå¤‰æ›´ã®ã¿å®Ÿéš›ã®DOMã«é©ç”¨ã™ã‚‹ï¼ˆ=ã‚³ãƒŸãƒƒãƒˆï¼‰ã€‚
ãƒ¼ï¼ä»®æƒ³DOMä½œæˆã•ã‚Œã¦ã‚‹æ™‚ç‚¹ã§stateã«å¤‰æ›´ãŒã‚ã£ãŸã¨ã„ã†ã“ã¨ã«ãªã‚‹ã®ã§å·®åˆ†ãŒã‚ã‚‹ã®ã¯å½“ãŸã‚Šå‰ã˜ã‚ƒã­ï¼Ÿ


seté–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹(=stateæ›´æ–°)
->stateæ›´æ–°ãŒå®Ÿè¡Œã€‚ãã‚Œã‚’æ¤œçŸ¥ã—ãŸReactã¯ã€ã€Œãã®stateãŒå¤‰æ›´ã•ã‚Œã¦ã‚‹ã‹ã©ã†ã‹ã‚ã¨ã§ç¢ºèªã™ã‚‹ã‚ã€‚ã§ã€ã‚‚ã—å¤‰æ›´ã•ã‚Œã¦ãŸã‚‰ãã®stateã¨é–¢ä¿‚ã®ã‚ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å¾Œã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã‚ã€‚ã‚‚ã—å¤‰æ›´ã•ã‚Œã¦ãªã‹ã£ãŸã‚‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯ã—ãªã„ã§è‰¯ã„ã‹ã‚‰ã‚¹ã‚­ãƒƒãƒ—ãªã€‚ã€


**A3 & A4. ä»¥ä¸Šã‚’è¸ã¾ãˆã‚‹ã¨ä»¥ä¸‹ã®æ§˜ã«å›ç­”ã™ã‚‹ã“ã¨ãŒã§ãã‚‹**
- stateæ›´æ–°ã®äºˆç´„

ã€Œstateæ›´æ–°ã€ã¯ã€Œseté–¢æ•°ãŒå‘¼ã°ã‚Œã‚‹ã€ã¨åŒç¾©ãªã®ã§ã€ãã‚‚ãã‚‚äºˆç´„ã¨ã„ã†æ¦‚å¿µã¯ç„¡ã„ã€‚

- stateæ›´æ–°ã®å®Ÿè¡Œ

seté–¢æ•°ãŒå‘¼ã°ã‚ŒãŸæ™‚ï¼ˆ1ç•ªï¼‰

- stateå¤‰æ›´ã®äºˆç´„

seté–¢æ•°ãŒå‘¼ã°ã‚ŒãŸæ™‚ï¼ˆ1ç•ªï¼‰

- stateå¤‰æ›´ã®å®Ÿè¡Œ

ã€‡ç•ªã§å®Ÿè¡Œã•ã‚Œã‚‹ã€‚

- å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®äºˆç´„

1ç•ªã§äºˆç´„ã•ã‚Œã‚‹ã€‚

- å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å®Ÿè¡Œ

ã€‡ç•ªã§å®Ÿè¡Œã•ã‚Œã‚‹ã€‚

## Q5. ã˜ã‚ƒã‚stateæ›´æ–°å¾Œã®(æœ€æ–°ã®)stateã‚’å‚ç…§ã—ãŸã„å ´åˆã¯ã©ã†ã™ã‚Œã°è‰¯ã„ã®ï¼Ÿ
ã“ã‚Œã¾ã§ã®èª¬æ˜ã‚’è¸ã¾ãˆã‚Œã°ã‚ã‹ã‚‹ã‚ˆã†ã«ã€seté–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸç›´å¾Œã«æ–°ã—ã„stateã‚’å‚ç…§ã—ã‚ˆã†ã¨ã—ã¦ã‚‚ã€æ›´æ–°å‰ã®å¤ã„å€¤ã—ã‹å¾—ã‚‰ã‚Œãªã„ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®æ§˜ã«æ›¸ã„ã¦ã‚‚ã€`console.log(state)`ã®å‡ºåŠ›çµæœã¯0ã§ã‚ã‚‹ã€‚

```jsx
const [state, setState] = useState(0);

setState(state + 1); // ã“ã“ã§å³æ™‚æ›´æ–°ã•ã‚Œã¦ã„ã‚‹è¨³ã§ã¯ãªã„ã®ã§...
console.log(state); // ã“ã®çµæœã¯1ã§ã¯ãªãã¾ã 0ã®ã¾ã¾
```

ã¤ã¾ã‚Šã€seté–¢æ•°ã¯éåŒæœŸå‡¦ç†ãªã®ã§ã‚ã‚‹ã€‚
ã—ã‹ã—éåŒæœŸå‡¦ç†ã ã‹ã‚‰ã¨è¨€ã£ã¦async/awaitãªã©ã‚’ä½¿ãˆã‚‹è¨³ã§ã‚‚ãªã„ã€‚
â†’ã§ã¯ã©ã†ã‚„ã£ã¦æœ€æ–°ã®(å¤‰æ›´å¾Œã®)stateã‚’å–å¾—ã™ã‚‹ã®ã‹ï¼Ÿã¨ã„ã†ç–‘å•ã€‚

å…¬å¼ã®ãƒšãƒ¼ã‚¸ã«ã€ã¡ã‚ƒã‚“ã¨ç­”ãˆãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹
> ã—ã‹ã—ã€å†ãƒ¬ãƒ³ãƒ€ãƒ¼å‰ã«æœ€æ–°ã® state ã‚’èª­ã¿å–ã‚ŠãŸã„å ´åˆã¯ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ state æ›´æ–°ç”¨é–¢æ•°ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

https://ja.react.dev/learn/state-as-a-snapshot


**A5. `useEffect`ã‚’ä½¿ç”¨ã™ã‚‹ã€‚**ï¼Ÿ

ä»–ã«ã‚‚`useLayoutEffect`ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€Reactã®`flushSync`é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ãªã©ã®æ–¹æ³•ã¯ã‚ã‚‹ã‚‰ã—ã„ãŒã€ä»Šå›ã¯å‰²æ„›ã€‚

useEffectã®ä¾å­˜é…åˆ—ã«ã€å¤‰æ›´ã‚’æ¤œçŸ¥ã—ãŸã„stateã‚’å…¥ã‚Œã‚Œã°ã€ãã‚ŒãŒå¤‰æ›´ã•ã‚ŒãŸå¾Œã«useEffectå†…ã®å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚

ä¾‹ãˆã°å…ˆã»ã©ã®stateã®ä¾‹ã§è¨€ãˆã°ã€ä»¥ä¸‹ã®æ§˜ã«æ›¸ãã“ã¨ãŒã§ãã‚‹ã€‚

```jsx
const [state, setState] = useState(0);
setState(1);

useEffect(() => {
    console.log(state); // ã¡ã‚ƒã‚“ã¨1ãŒå‡ºåŠ›ã•ã‚Œã‚‹
}, [state]);
```
